<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Walking Sequence - Aesthetic Animation</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            background: linear-gradient(180deg, #f0f0f0 0%, #fafafa 100%);
            font-family: 'Inter', system-ui, sans-serif;
        }
        canvas { display: block; }
        
        .back-btn {
            position: absolute;
            top: 40px;
            left: 40px;
            padding: 10px 20px;
            background: transparent;
            border: 1px solid rgba(26, 26, 26, 0.1);
            color: #1a1a1a;
            text-decoration: none;
            font-size: 14px;
            letter-spacing: 1px;
            border-radius: 20px;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .back-btn:hover {
            background: rgba(26, 26, 26, 0.05);
            border-color: rgba(26, 26, 26, 0.2);
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <a href="../index.html" class="back-btn">‚Üê Back</a>
    
    <script>
        let scene, camera, renderer;
        let walkingFigures = [];
        let time = 0;
        
        function init() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf8f8f8);
            
            camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 8, 20);
            camera.lookAt(0, 0, 0);
            
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            document.body.appendChild(renderer.domElement);
            
            // Lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.2);
            directionalLight.position.set(5, 10, 5);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            
            createWalkingSequence();
            animate();
        }
        
        function createWalkingFigure(frameIndex) {
            const group = new THREE.Group();
            
            const material = new THREE.MeshBasicMaterial({
                color: 0x2a2a2a,
                side: THREE.DoubleSide
            });
            
            // Head
            const headGeometry = new THREE.SphereGeometry(0.2, 6, 4);
            const head = new THREE.Mesh(headGeometry, material);
            head.position.y = 1.7;
            head.castShadow = true;
            group.add(head);
            
            // Torso (angled based on frame)
            const torsoGeometry = new THREE.CylinderGeometry(0.15, 0.2, 0.7, 6);
            const torso = new THREE.Mesh(torsoGeometry, material);
            torso.position.y = 1.1;
            torso.rotation.x = Math.sin(frameIndex * 0.5) * 0.05;
            torso.castShadow = true;
            group.add(torso);
            
            // Arms with walking motion
            const armAngle = Math.sin(frameIndex) * 0.4;
            
            // Left arm
            const leftArmGeometry = new THREE.CylinderGeometry(0.05, 0.05, 0.7, 4);
            const leftArm = new THREE.Mesh(leftArmGeometry, material);
            leftArm.position.set(-0.2, 1.1, 0);
            leftArm.rotation.x = armAngle;
            leftArm.rotation.z = 0.1;
            leftArm.castShadow = true;
            group.add(leftArm);
            
            // Right arm
            const rightArm = new THREE.Mesh(leftArmGeometry, material);
            rightArm.position.set(0.2, 1.1, 0);
            rightArm.rotation.x = -armAngle;
            rightArm.rotation.z = -0.1;
            rightArm.castShadow = true;
            group.add(rightArm);
            
            // Legs with walking motion
            const legAngle = Math.sin(frameIndex) * 0.5;
            
            // Left leg
            const legGeometry = new THREE.CylinderGeometry(0.06, 0.07, 0.9, 4);
            const leftLeg = new THREE.Mesh(legGeometry, material);
            leftLeg.position.set(-0.1, 0.45, 0);
            leftLeg.rotation.x = -legAngle;
            leftLeg.castShadow = true;
            group.add(leftLeg);
            
            // Right leg
            const rightLeg = new THREE.Mesh(legGeometry, material);
            rightLeg.position.set(0.1, 0.45, 0);
            rightLeg.rotation.x = legAngle;
            rightLeg.castShadow = true;
            group.add(rightLeg);
            
            // Shadow
            const shadowGeometry = new THREE.PlaneGeometry(1.2, 0.6);
            const shadowMaterial = new THREE.MeshBasicMaterial({
                color: 0x000000,
                transparent: true,
                opacity: 0.15,
                side: THREE.DoubleSide
            });
            const shadow = new THREE.Mesh(shadowGeometry, shadowMaterial);
            shadow.rotation.x = -Math.PI / 2;
            shadow.position.y = 0.01;
            shadow.position.z = 0.2;
            group.add(shadow);
            
            return group;
        }
        
        function createWalkingSequence() {
            // Create 6 frames of walking animation
            for (let i = 0; i < 6; i++) {
                const figure = createWalkingFigure(i * Math.PI / 3);
                figure.position.x = (i - 2.5) * 3;
                figure.position.z = 0;
                
                figure.userData = {
                    frameOffset: i * Math.PI / 3,
                    baseX: figure.position.x
                };
                
                scene.add(figure);
                walkingFigures.push(figure);
            }
        }
        
        function animate() {
            requestAnimationFrame(animate);
            time += 0.02;
            
            // Animate walking sequence
            walkingFigures.forEach((figure, index) => {
                const walkPhase = time + figure.userData.frameOffset;
                
                // Update leg positions for walking
                const leftLeg = figure.children[4];
                const rightLeg = figure.children[5];
                if (leftLeg) leftLeg.rotation.x = -Math.sin(walkPhase) * 0.5;
                if (rightLeg) rightLeg.rotation.x = Math.sin(walkPhase) * 0.5;
                
                // Update arm positions
                const leftArm = figure.children[2];
                const rightArm = figure.children[3];
                if (leftArm) leftArm.rotation.x = Math.sin(walkPhase) * 0.4;
                if (rightArm) rightArm.rotation.x = -Math.sin(walkPhase) * 0.4;
                
                // Vertical bob
                figure.position.y = Math.abs(Math.sin(walkPhase * 2)) * 0.1;
                
                // Subtle torso rotation
                const torso = figure.children[1];
                if (torso) {
                    torso.rotation.x = Math.sin(walkPhase * 2) * 0.03;
                    torso.rotation.y = Math.sin(walkPhase) * 0.02;
                }
                
                // Update shadow
                const shadow = figure.children[6];
                if (shadow) {
                    shadow.scale.x = 1.2 + Math.abs(Math.sin(walkPhase * 2)) * 0.2;
                    shadow.material.opacity = 0.15 + Math.abs(Math.sin(walkPhase)) * 0.05;
                }
            });
            
            // Camera movement
            camera.position.x = Math.sin(time * 0.2) * 5;
            camera.position.y = 8 + Math.sin(time * 0.3) * 2;
            camera.lookAt(0, 0, 0);
            
            renderer.render(scene, camera);
        }
        
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        
        init();
    </script>
</body>
</html>